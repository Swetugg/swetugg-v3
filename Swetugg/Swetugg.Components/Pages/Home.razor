@page "/"
@using Swetugg.Services
@using Swetugg.Services.Models
@using Microsoft.AspNetCore.Components
@inject ConferenceManager ConferenceManager
@inject NavigationManager NavigationManager
@rendermode RenderMode.InteractiveServer

@code {
    private IEnumerable<ConferenceEdition>? Conferences;
    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        Conferences = await ConferenceManager.GetAllEditionssAsync();
        var currentConference = Conferences.FirstOrDefault(c => c.IsCurrent);
        if (currentConference != null)
        {
            NavigationManager.NavigateTo($"/{currentConference.City}/{currentConference.Year}");
        }
    }
}